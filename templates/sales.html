<!DOCTYPE html>
<html>

<head>
    <title>Sales Prediction</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-dragdata@latest"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</head>

<body>
    <!-- Full page wrapper: Form on left, Chart on right -->
    <div class="full-page-wrapper">

        <!-- Left: Sales Form -->
        <div class="sales-container">
            <h1>Sales Prediction</h1>
            <form method="POST" action="{{ url_for('sales') }}">

                <label for="product_type">Is this a new or existing product?</label>
                <select id="product_type" name="product_type" required>
                    <option value="old">Existing Product</option>
                    <option value="new">New Product</option>
                </select>

                <div id="previousSalesBlock">
                    <label for="previous_sales">Previous Annual Sales ($):</label>
                    <input type="number" id="previous_sales" name="previous_sales" step="0.01">
                </div>

                <div id="volumeBlock" style="display:none;">
                    <label for="volume">Projected Volume (units):</label>
                    <input type="number" id="volume" name="volume" min="1">
                </div>

                <label for="product">Product Name:</label>
                <input type="text" id="product" name="product" required>

                <label for="price">Price ($):</label>
                <input type="number" id="price" name="price" step="0.01" required>

                <label for="marketing_budget">Marketing Budget ($):</label>
                <input type="number" id="marketing_budget" name="marketing_budget" step="0.01" required>

                <label for="marketing_timeframe">Marketing Budget Timeframe:</label>
                <select id="marketing_timeframe" name="marketing_timeframe" required>
                    <option value="months">Months</option>
                    <option value="years">Years</option>
                </select>

                <label for="year">Years to be predicted:</label>
                <input type="number" id="year" name="year" min="1" max="30" required>

                <label for="month">Months to be predicted:</label>
                <select id="month" name="month" required>
                    <option value="0">0 months</option>
                    <option value="3">3 months</option>
                    <option value="6">6 months</option>
                    <option value="9">9 months</option>
                </select>

                <input type="submit" value="Predict Sales">
            </form>

            <a href="{{ url_for('home') }}"><button>Back to Home</button></a>
            <a href="{{ url_for('download_sales') }}"><button>Download Data</button></a>
            <a href="{{ url_for('improvement') }}"><button>Go to Improvement Guide</button></a>
        </div>

        <!-- Right: Sales Chart -->
        <div class="chart-container">
            <div class="chart-controls">
                <label><input type="checkbox" id="togglePredicted" checked> Show Predicted Sales</label>
                <label><input type="checkbox" id="toggleMarketing" checked> Sales Calculated Based On Market Investments</label>
                <button id="downloadCSV">Download CSV</button>
            </div>

            <div class="chart" style="height: 100%;">
                <canvas id="salesChart"></canvas>
            </div>
        </div>

    </div>
</body>

</html>