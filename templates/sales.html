<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Sales Prediction</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-dragdata@latest"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</head>

<body data-page="sales">
    <header class="hero">
        <h1>ðŸ“ˆ Sales Prediction</h1>
        <p>Predict future sales based on your data and marketing strategy</p>
    </header>

    <div class="layout-container">
        <!-- Sales Input Form -->
        <div class="sales-container">
            <h2>Enter Product Details</h2>

            <form id="salesForm" method="POST" action="{{ url_for('sales') }}">
                <label for="product_type">Product Type:</label>
                <select id="product_type" name="product_type" required>
                    <option value="old">Existing Product</option>
                    <option value="new">New Product</option>
                </select>

                <div id="previousSalesBlock">
                    <label for="previous_sales">Annual Previous Sales ($):</label>
                    <input type="number" id="previous_sales" name="previous_sales" step="0.01">
                </div>

                <div id="volumeBlock" style="display:none;">
                    <label for="volume">Projected Volume (units):</label>
                    <input type="number" id="volume" name="volume" min="1">
                </div>

                <label for="product">Product Name:</label>
                <input type="text" id="product" name="product" required>

                <label for="product_category">Product Category (for seasonal boosts):</label>
                <select id="product_category" name="product_category">
                    <option value="">-- Select Category --</option>
                    <option value="cars" data-boost='{"summer":12,"winter":8}'>Cars</option>
                    <option value="toys" data-boost='{"summer":15,"winter":25,"fall":10}'>Toys</option>
                    <option value="clothing" data-boost='{"fall":12,"winter":10}'>Clothing</option>
                    <option value="electronics" data-boost='{"winter":20,"summer":8}'>Electronics</option>
                    <option value="food" data-boost='{"summer":10,"winter":15}'>Food & Beverage</option>
                    <option value="retail" data-boost='{"winter":10}'>General Retail</option>
                </select>

                <label for="price">Price ($):</label>
                <input type="number" id="price" name="price" step="0.01" required>

                <label for="marketing_budget">Marketing Budget ($):</label>
                <input type="number" id="marketing_budget" name="marketing_budget" step="0.01" required>

                <label for="marketing_timeframe">Marketing Budget Timeframe:</label>
                <select id="marketing_timeframe" name="marketing_timeframe" required>
                    <option value="months">Months</option>
                    <option value="years">Years</option>
                </select>

                <label for="year">Years to Predict:</label>
                <input type="number" id="year" name="year" min="1" max="30" required>

                <label for="month">Additional Months to Predict:</label>
                <select id="month" name="month" required>
                    <option value="0">0 months</option>
                    <option value="3">3 months</option>
                    <option value="6">6 months</option>
                    <option value="9">9 months</option>
                </select>

                <input type="submit" value="Predict Sales">
            </form>

            <div style="margin-top: 20px;">
                <a href="{{ url_for('home') }}"><button type="button">Back to Home</button></a>
                <a href="{{ url_for('download_sales') }}"><button type="button">Download Data</button></a>
                <a href="{{ url_for('improvement') }}"><button type="button">Go to Improvement Guide</button></a>
            </div>
        </div>

        <!-- Chart Section -->
        <div class="chart">
            <h2>Sales Forecast</h2>
            <div class="chart-controls">
                <label><input type="checkbox" id="togglePredicted" checked> Show Predicted Sales</label>
                <label><input type="checkbox" id="toggleMarketing" checked> Apply Marketing Budget</label>
                <button id="downloadCSV" type="button">Download CSV</button>
            </div>
            <div class="chart-container" style="height: 400px;">
                <canvas id="salesChart"></canvas>
            </div>
        </div>

        <!-- Histogram & Feedback Section (improvement summary) -->
        <div class="histogram-section">
            <h2>Data Summary & Histogram</h2>
            <canvas id="histogramChart" style="height: 400px;"></canvas>
            <div id="histogramFeedback"></div>
        </div>
    </div>

    <footer>
        &copy; 2025 Sprite Blue Jet. Built for FBLA Coding & Programming.
    </footer>
</body>

</html>