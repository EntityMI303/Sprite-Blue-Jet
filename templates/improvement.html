<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Improvement Guide</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</head>

<body>

    <header class="hero">
        <h1>ðŸ“Š Improvement Guide</h1>
        <p>Recommendations based on your submitted sales data</p>
    </header>

    <div class="sales-container">
        {% if data %}
        <h2>Submitted Sales Data</h2>
        <ul>
            <li><strong>Product Type:</strong> {{ data.product_type }}</li>
            <li><strong>Product:</strong> {{ data.product }}</li>
            <li><strong>Price ($):</strong> {{ data.price }}</li>
            {% if data.product_type == "old" %}
            <li><strong>Previous Annual Sales ($):</strong> {{ data.previous_annual_sales }}</li>
            {% else %}
            <li><strong>Projected Volume (units):</strong> {{ data.volume }}</li>
            {% endif %}
            <li><strong>Marketing Budget ($):</strong> {{ data.marketing_budget }}</li>
            <li><strong>Marketing Timeframe:</strong> {{ data.marketing_timeframe }}</li>
            <li><strong>Product Category:</strong> {{ data.product_category }}</li>
            <li><strong>Years to be predicted:</strong> {{ data.year }}</li>
            <li><strong>Months to be predicted:</strong> {{ data.month }}</li>
        </ul>

        <h2>Improvement Suggestions</h2>
        <p>
            {% if data.product_type == "new" %}
            Since this is a new product, focus on building awareness and scaling volume.
            Consider introductory pricing strategies and targeted marketing campaigns based on product category.
            {% else %}
            With existing sales history, analyze trends over the previous years.
            If sales are declining, adjust pricing or increase marketing investments.
            Leverage seasonal boosts based on the product category.
            {% endif %}
        </p>

        <!-- Chart for improvement comparison -->
        <canvas id="improvementChart"
            data-previous="{{ data.previous_annual_sales if data.product_type == 'old' else (data.volume | float * data.price | float) }}"
            data-predicted="{{ (data.volume | float * data.price | float) if data.product_type == 'new' else data.previous_annual_sales }}"
            data-marketing="{{ data.marketing_budget }}" data-timeframe="{{ data.marketing_timeframe }}">
        </canvas>

        <a href="{{ url_for('home') }}"><button>Back to Home</button></a>
        <a href="{{ url_for('download_sales') }}"><button>Download Data</button></a>

        {% else %}
        <p>No sales data submitted yet.</p>
        {% endif %}
    </div>

    <footer>
        &copy; 2025 Sprite Blue Jet. Built for FBLA Coding & Programming.
    </footer>

</body>

</html>